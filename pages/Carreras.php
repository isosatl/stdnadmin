<?php    //Script para determinar si se ha iniciado sessión y si es administrador.    if (session_id() == ''){        session_start();                    if (isset($_SESSION['privilegios'])){            if ($_SESSION['privilegios'] == 'admin'){                //mostrar contenido que corresponda a administrador                //print_r($_SESSION['privilegios']);                            }        }    }    if (!isset($_SESSION['usuario']) || (!isset($_SESSION['clave']))) {        $_SESSION['violation'] = 1;        header('Location: ./login.php');        exit();    } if (isset($_SESSION['timeout'])) {        $sessionTTL = time() - $_SESSION['timeout'];        if ($sessionTTL > $_SESSION['tiempoLimite']) {            $_SESSION['logedout'] = 1;            header('Location: ./login.php');            exit();        }    }    $_SESSION['timeout'] = time();    print_r($_SESSION);    include ROOT_DIR . '/includes/header.php';				    include ROOT_DIR . '/includes/nav.php';		?>    <link rel="stylesheet" type="text/css" href="themes/empty/css/bootstrap.css" />	        <body id="carreras">    <div class="CarrerasTableContainer"><script type="text/javascript">$(document).ready(function () {    $('.CarrerasTableContainer').jtable({        paging: true,        pageSize: 3,        sorting: true,        defaultSorting: 'nombre_carrera ASC',        selecting: true,        multiselect: true,        selectingCheckboxes: true,        selectOnRowClick: false,                title: 'Formulario de Carreras',        actions: {            listAction: 'dbInterfaces/CarrerasActions.php?action=list',            createAction: 'dbInterfaces/CarrerasActions.php?action=create',            updateAction: 'dbInterfaces/CarrerasActions.php?action=update',            deleteAction: 'dbInterfaces/CarrerasActions.php?action=delete'        },        fields: {            id_carreras: {                title: 'Id de Carreras',                width: '13%',                key: true,                create: false,                edit: false,                list: true            },            Grados:{                title: 'Grados',                width: '08%',                sorting: false,                edit: false,                create: false,                display: function(gradosData){                    var $img = $('<img src="img/grados.png" title="Agregar grado" />');                    $img.click(function(){                        $('.CarrerasTableContainer').jtable('openChildTable', $img.closest('tr'),{                            title: gradosData.record.nombre_carrera,                            actions: {                                listAction: 'dbInterfaces/gradosActions.php?action=list&id_carreras=' + gradosData.record.id_carreras,				                                                createAction: 'dbInterfaces/gradosActions.php?action=create',                                updateAction: 'dbInterfaces/gradosActions.php?action=update',                                deleteAction: 'dbInterfaces/gradosActions.php?action=delete'                            },                            fields: {            					            					            					            					            					            					            					                                id_g_carreras: {                                    //type: 'hidden',                                    title: 'Id de Carreras',                                    create: true,                                    edit: false,                                    width: '13%',                                    list: true,                                    defaultValue: gradosData.record.id_carreras                                },                				                				                				                			                			                                id_grados: {                                    title: 'Id de Grados',                                    width: '13%',                                    key: true,                                    create: false,                                    edit: false,                                    list: true                                },                                /********* Grados tienen secciones***************/                                Secciones:{                                    title: 'Secciones',                                    width: '10%',                                    sorting: false,                                    edit: false,                                    create: false,                                    list: true,                                    display: function(seccionesData){                                        var $img = $('<img src="img/secciones1.png" title="Agregar sección" />');                                        $img.click(function(){                                            $img.closest('div.jtable-child-table-container').jtable('openChildTable', $img.closest('tr'),{                                                title: seccionesData.record.grado,                                                actions: {                                                    listAction: 'dbInterfaces/SeccionesActions.php?action=list&id_grados=' + seccionesData.record.id_grados,				                                                                    createAction: 'dbInterfaces/SeccionesActions.php?action=create',                                                    updateAction: 'dbInterfaces/SeccionesActions.php?action=update',                                                    deleteAction: 'dbInterfaces/SeccionesActions.php?action=delete'                                                },                                                fields:{                                                    id_secciones:{                                                        title: 'Id de secciones',                                                        key: true,                                                        create: false,                                                        edit: false,                                                        list: true,                                                        width: '12%'                                                    },			                				                				                				                				                				                				                				                                                    id_s_carreras:{                                                        title: 'Id de Carreras',                                                        create: true,                                                        edit: false,                                                        list: true,                                                        defaultValue: seccionesData.record.id_g_carreras,                                                        width: '12%'                                                    },                	                                                    id_s_grados:{                                                        title: 'Id de Grados',                                                        create: true,                                                        edit: false,                                                        list: true,                                                        defaultValue: seccionesData.record.id_grados,                                                        width: '10%'                                                    },                				                				                				                			                			                                                    nombre_d_seccion:{                                                        title: 'Sección',                                                        create: true,                                                        edit: true,                                                        list: true,                                                        width: '20%'                                                    },                                                    maestro_guia:{                                                        title: 'Maestro guía',                                                        create: true,                                                        edit: true,                                                        list: true,                                                        width: '40%'                                                    }                                                }                                            }, function(data) { //opened handler                                                data.childTable.jtable('load');                                            });                                        });                                        return $img;                                    }                                },                            				                                /********Terminan secciones******************/                                grado: {                                    title: 'Grados',                                    width: '15%',                                    create: true,                                    edit: true,                                    list: true                                },                                aula: {                                    title: 'Aula',                                    width: '12%',                                    create: true,                                    edit: true,                                    list: true                                },                                maestro_coordinador: {                                    title: 'Guía',                                    width: '30%',                                    create: true,                                    edit: true,                                    list: true                                }                            }                        }, function(data) { //opened handler                            data.childTable.jtable('load');                        });                    });                    return $img;                }            },                        nombre_carrera: {                title: 'Carrera',                width: '50%'            },                                                                                                                                                                                                                                            ciclos_d_duracion: {                title: 'Ciclos',                width: '08%',                create: true,                list: true            },            codigo_de_carrera: {                title: 'Código',                width: '08%',                create: true,                list: true            },        },                                    selectionChanged: function(){            var $selectedRows = $('.CarrerasTableContainer').jtable('selectedRows');            $('#SelectedRowList').empty();            if($selectedRows.length > 0){                $selectedRows.each(function(){                    var record = $(this).data('record');                    $('#SelectedRowList').append(                        'id_carreras:' + record.id_carreras + 'nombre_carrera:' + record.nombre_carrera                    );                });            }else{                $('#SelectedRowList').append('No row selected!');            }        }                            });    $('.CarrerasTableContainer').jtable('load');});    $(document).ready(function(){    $('table.jtable').css({'width':'700px', 'position':'relative', 'left':'145px'});    $('.jtable-title').css({'width':'698px', 'position':'relative', 'left':'143px'});    $('.jtable-bottom-panel').css({'width':'698px', 'position':'relative', 'left':'145px'});    //$('table.jtable').offset({top: 10, left: 30});    });</script>    </div>    <div id="footer_container"></div>            	</body></html>	