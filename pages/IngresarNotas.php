<?php 		    //Script para determinar si se ha iniciado sessión y si es administrador.    if (session_id() == ''){        session_start();                    if (isset($_SESSION['privilegios'])){            if ($_SESSION['privilegios'] == 'admin'){                //mostrar contenido que corresponda a administrador                //print_r($_SESSION['privilegios']);                            }        }    }    if (!isset($_SESSION['usuario']) || (!isset($_SESSION['clave']))) {        $_SESSION['violation'] = 1;        header('Location: ./login.php');        exit();    } if (isset($_SESSION['timeout'])) {        $sessionTTL = time() - $_SESSION['timeout'];        if ($sessionTTL > $_SESSION['tiempoLimite']) {            $_SESSION['logedout'] = 1;            header('Location: ./login.php');            exit();        }    }    $_SESSION['timeout'] = time();    print_r($_SESSION);    include ROOT_DIR . '/includes/header.php';				    include ROOT_DIR . '/includes/nav.php';		?><link rel="stylesheet" type="text/css" href="themes/empty/css/bootstrap.css" />	        <body id="calif">    <!-- div contenedor del listBox para seleccionar secciones-->    <div class="poblar-secc-pa-notas">        <form action="">            <p>Seleccione una sección para ingresar calificaciones                <select id="select-secc" name="select-secc">                <option value="Default" selected="selected">Seleccione una sección</option>                            </select></p>        </form>    </div>	<div class="NotasTableContainer">        <script type="text/javascript">        /* función que pobla el listBox de secciones*/    $(document).ready(function(){        fillSecciones();                    });    /* al cargar el documento se muestran todos los alumnos*/    $(document).ready(function () {        $('.NotasTableContainer').jtable({                    	paging: true,        	pageSize: 5,        	sorting: true,        	defaultSorting: 'nombres_alumnos ASC',        	selecting: true,        	multiselect: true,        	selectingCheckboxes: true,        	selectOnRowClick: false,            title: 'Formulario de Alumnos con notas',            actions: {                listAction: 'dbInterfaces/AlumnosSortedActions.php?action=list1',            },            fields: {                id_alumnos: {                    key: true,                    create: false,                    edit: false,                    list: false                },                                     /********************Calificaciones por bimestre ***********************/               	    Calificaciones:{    				title:'Notas',			    	width: '5%',    				sorting: false,    				edit: false,    				create: false,    				display: function(califData){    					var $img = $('<img src="img/calificaciones.png" title="Agregar calificación" />');    					$img.click(function(){    						$('.NotasTableContainer').jtable('openChildTable', $img.closest('tr'),{            				title: califData.record.nombres_alumnos,            				actions: {				                listAction: 'dbInterfaces/CalificacionesActions.php?action=list&id_alumnos=' + califData.record.id_alumnos,                				createAction: 'dbInterfaces/CalificacionesActions.php?action=create',                				updateAction: 'dbInterfaces/CalificacionesActions.php?action=update',                				deleteAction: 'dbInterfaces/CalificacionesActions.php?action=delete'            				},            				fields: {                				id_calificaciones: {                    				key: true,                    				create: false,                    				edit: false,                    				list: false                				},                				calificacion: {                    				title: 'Nota según código del curso',                    				create: true,                    				edit: true,                    				list: true,                    				                    				                    				inputClass: 'validate[required]',                    				width: '15%'                				},                				impartida_por: {                    				type: 'hidden',                					                    				title: 'Impartida por',                    				create: true,                    				edit: true,                    				list: false,                    				                    				width: '15%'                				},                				promedio_anual: {                    				title: 'Promedio',                    				create: false,                    				edit: false,                    				list: false,                    				                    				width: '25%'                				},                				unidades_segun_grado: {                    				title: 'Unidades por grado',                    				options: {'2':'2','3':'3','4':'4'},                    				defaultValue: '4',                    				create: true,                    				edit: true,                    				list: true,                    				                    				width: '15%'                				},                				id_ca_cursos: {                    				title: 'Código del Curso',                    				create: true,                    				list:true,                    				edit: true,                    				width: '15%'                				},                				id_ca_unidades: {                    				title: 'Código de Unidad',                    				options: {'1':'1','2':'2','3':'3','4':'4'},                    				defaultValue: '1',                    				create: true,                    				list:true,                    				edit: true,                    				width: '10%'                				},                				id_ca_alumnos: {                    				title: 'ID Alumno',                    				//type: 'hidden',                    				create: true,                    				edit: true,                    				list:true,                    				defaultValue: califData.record.id_alumnos,                    				width: '10%'                				},                				id_ca_grados: {                    				title: 'ID Grado',                    				//type: 'hidden',                    				create: true,                    				list:true,                    				edit: true,                    				defaultValue: califData.record.id_a_grados,                    				width: '10%'                				},                				id_ca_secciones: {                    				title: 'ID Sección',                    				//type: 'hidden',                    				create: true,                    				list:true,                    				edit: true,                    				defaultValue: califData.record.id_a_secciones,                    				width: '10%'                				},                				id_ca_carreras: {                    				title: 'ID Carrera',                    				//type: 'hidden',                    				create: true,                    				list:true,                    				edit: true,                    				defaultValue: califData.record.id_a_carreras,                    				width: '10%'                				}	            			}    	    			}, function(data) { //opened handler        	    		data.childTable.jtable('load');	        		});	    		});	    		return $img;    		}		},                          		/*************Termina calificaciones por bimestre ***************/                                                nombres_alumnos: {                    title: 'Nombres',                    width: '28%'                },                apellidos_alumnos: {                    title: 'Apellidos',                    width: '28%'                },                id_a_grados: {                	title: 'Grado',                    create: false,                    edit: false,                    list: true,                	                	width: '12%'                },                id_a_secciones: {                	title: 'Sección',                    create: false,                    edit: false,                    list: true,                 	//defaultValue: id_sec,                	width: '12%'                },                id_a_carreras: {                	title: 'Carrera',                    create: false,                    edit: false,                    list: true,                	width: '12%'                }			},			selectionChanged: function(){        		var $selectedRows = $('.NotasTableContainer').jtable('selectedRows');        		$('#SelectedRowList').empty();        		if($selectedRows.length > 0){        			$selectedRows.each(function(){        				var record = $(this).data('record');        				$('#SelectedRowList').append(        					'id_alumnos:' + record.id_alumnos + 'nombres_alumnos:' + record.nombres_alumnos        				);        			});        		}else{        			$('#SelectedRowList').append('No row selected!');        		}        	}		});		//Load all records when page is first shown		$('.NotasTableContainer').jtable('load');    });        /* al seleccionar una sección se muestras los alumnos*/    $('#select-secc').change(function(e){        var id_secciones = $('#select-secc').val();            e.preventDefault();        $('.NotasTableContainer').jtable({            actions: {                listAction: 'dbInterfaces/CalificacionesActions.php?action=secciones&id_secciones=' + id_secciones,            },                    });		$('.NotasTableContainer').jtable('load');    });    $(document).ready(function(){    $('table.jtable').css({'width':'700px', 'position':'relative', 'left':'145px'});    $('.jtable-title').css({'width':'698px', 'position':'relative', 'left':'143px'});    $('.jtable-bottom-panel').css({'width':'698px', 'position':'relative', 'left':'145px'});    //$('table.jtable').offset({top: 10, left: 30});    });</script>    </div>        <div id="footer_container"></div>	</body></html>